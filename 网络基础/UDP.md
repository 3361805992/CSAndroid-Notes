## UDP



TCP 是面向数据流的协议

UDP是面向数据报的协议



UDP 不管数据大小， 将数据前增加UDP数据头部，然后在前面增加IP头部。

TCP  传输报文长度 MSS，进行拆分包

### UDP封装



/ IP头部 20字节   /UDP头部 8字节/UDP数据/

​                                |<-----UDP 数据报----->|

|<------------   IP 数据报     --------->|





### TCP和UDP区别

| 名称           | TCP        | UDP                                                          |
| -------------- | ---------- | ------------------------------------------------------------ |
| 协议特点       | 数据流协议 | 数据包协议                                                   |
| 数据包大小     | MSS        | 无限制                                                       |
| 可靠性         | 可靠       | 不可靠                                                       |
| 运用场景       | TCP单播    | 1. 查询类，如DNS<br />2. 数据传输TFTP<br />3. 语音视频流、组播和广播 |
| 大小限制       |            | 最小8个字节                                                  |
| 是否需要校验和 | 必选       | 可选                                                         |
|                |            |                                                              |

UDP长度可以是奇数， 计算校验和的时候会补充0，再计算校验和。



## IP分片



1. IP头部和IP数据 总和  在出接口MTU进行比较，大于则分片。一般1500
2. 分片可能会进行多次分片， 但最终到目的地才进行重组装。



IP  头部信息

/16位标识 （所有分片一样） /CU/DF（不分片位）/MF（1 表示不是最后一排）/13位片偏移

DF作用，查询MTU值。











